<!DOCTYPE html>
<html>
    <head><title>Go to the url.</title></head>
    <body>
        <p>Quick! In a new tab, go to chrome://extensions and click the extension to hang. The url should be extUrl there! You have 15 seconds. Follow the instructions in the title. When it says "flip switch", click the "allow access to file urls" switch until it gets toggled, and then click it again until it gets toggled. When it says "hanging", it might be laggy. Have fun!</p>
        <script>
            var [name, url] = JSON.parse(atob(location.hash.slice(1)));
                        function replaceIframes(window, iframeSrc) {
    for (var i = 0; i < 1000; i++) {
      var iframe = window.document.createElement('iframe');
      iframe.src = iframeSrc;
      iframe.style.width = '100%';
      iframe.style.height = '100px';
      window.document.body.appendChild(iframe);
    }
    setTimeout(function () {
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
      replaceIframes(window, iframeSrc);
    }, 5);
  }
            function openIframeWindow(iframeSrc) {
                var newWindow = window.open('', '_blank', 'width=800,height=600');
                window.open().close();
                newWindow.document.title = "Loading...";
                replaceIframes(newWindow, url);
                setTimeout(function() {
                    location.href = iframeSrc;
                    newWindow.close();
                }, 5000);
            }

            document.querySelector("p").innerText = 
                document.querySelector("p").innerText.replace("extUrl", "chrome://extensions/?id=" + url.split('//')[1].split('/')[0]);

            setTimeout(function() {
                document.title = "hanging " + name + "...";
                openIframeWindow(url);
            }, 15000);
        </script>
    </body>
</html>
